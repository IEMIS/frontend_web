(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[77],{109:function(e,a,t){"use strict";t.d(a,"a",(function(){return l})),t.d(a,"d",(function(){return i})),t.d(a,"c",(function(){return s})),t.d(a,"b",(function(){return u})),t.d(a,"e",(function(){return m}));var n=t(55),r=t.n(n),o=t(56),c="https://iemis.herokuapp.com/api/v1",l=function(){var e=Object(o.a)(r.a.mark((function e(a,t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/admin"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e)}));case 3:return n=e.sent,o=n.json(),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(r.a.mark((function e(a){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/admin"),{method:"GET",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(a)}}).catch((function(e){console.log(e)}));case 3:return t=e.sent,n=t.json(),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),s=function(){var e=Object(o.a)(r.a.mark((function e(a,t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/admin/").concat(a),{method:"GET",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e)}));case 3:return n=e.sent,o=n.json(),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(r.a.mark((function e(a,t,n){var o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/admin/").concat(a),{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(n)}}).catch((function(e){console.log(e)}));case 3:return o=e.sent,l=o.json(),e.abrupt("return",l);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(r.a.mark((function e(a,t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/admin/").concat(a),{method:"DELETE",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e)}));case 3:return n=e.sent,o=n.json(),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}()},223:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return g}));var n=t(55),r=t.n(n),o=t(56),c=t(32),l=t(3),i=t(64),s=t(0),u=t.n(s),m=t(81),p=t(89),d=t(82),f=t(165),h=t(348),b=t(30),E=t(63),j=t.n(E),v=t(109),O=t(2);function g(){var e=Object(O.g)().id,a=u.a.useState({firstName:"",lastName:"",middleName:"",phone:"",email:"",password:"",password2:"",level:"",loading:!1,redirectToPage:!1,error:!1,reload:!1,loadingBtn:!1,token:""}),t=Object(i.a)(a,2),n=t[0],s=t[1],E=n.firstName,g=n.lastName,w=n.middleName,y=n.phone,C=n.email,x=n.password,B=n.password2,k=n.level,N=n.error,P=n.loading,T=n.reload,A=n.redirectToPage,L=n.loadingBtn,G=n.token,I=function(e){return function(a){s(Object(l.a)(Object(l.a)({},n),{},Object(c.a)({},e,a.target.value)))}},q=function(){var a=Object(o.a)(r.a.mark((function a(){var t,o;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t={firstName:E,lastName:g,middleName:w,phone:y,email:C,password:x,password2:B,level:k},a.next=3,Object(v.b)(e,t,G);case 3:if(o=a.sent,console.log(o),o){a.next=8;break}return j.a.fire("Oops...","internet server error, Please, check your network connection","error"),a.abrupt("return",s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!1})));case 8:if(!o.error){a.next=11;break}return j.a.fire("Oops...",o.error,"error"),a.abrupt("return",s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!1})));case 11:if(!o.message){a.next=16;break}return j.a.mixin({toast:!0,timerProgressBar:!0,position:"top-end",showConfirmButton:!1,timer:3e3}).fire({animation:!0,type:"success",title:"Request is successful"}),s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!1,redirectToPage:!0})),a.abrupt("return",j.a.fire("saved...",o.message,"success"));case 16:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),S=function(e){e.preventDefault(),s(Object(l.a)(Object(l.a)({},n),{},{loading:!1,error:!1,reload:!T}))};return u.a.useEffect((function(){var a=!1;return function(){var t=Object(o.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!0})})),t.next=3,Object(v.c)(e);case 3:if(n=t.sent,a){t.next=18;break}if(n){t.next=9;break}return j.a.fire("Oops...","internet server error, Please, check your network connection","error"),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!1,error:!0})})),t.abrupt("return");case 9:if(!n.error){t.next=13;break}return j.a.fire("Oops...",n.error,"error"),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!1,error:!0})})),t.abrupt("return");case 13:if(!n.message){t.next=18;break}return j.a.mixin({toast:!0,timerProgressBar:!0,position:"top-end",showConfirmButton:!1,timer:3e3}).fire({showClass:!0,type:"success",title:n.message}),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!1,error:!1,firstName:n.data.firstName,lastName:n.data.lastName,phone:n.data.phone,middleName:n.data.middleName,email:n.data.email,level:n.data.level})})),t.abrupt("return",j.a.fire("Great",n.message,"success"));case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){a=!0}}),[T,e]),u.a.createElement(b.a,null,function(){if(A)return u.a.createElement(O.a,{to:"/admin/users/read"})}(),function(){if(N)return u.a.createElement(b.a,null,u.a.createElement(m.a,null,u.a.createElement(p.a,null,u.a.createElement(d.a,null,u.a.createElement(d.a.Header,null,u.a.createElement(d.a.Title,{as:"h5"},"Error in reading this user .")),u.a.createElement(d.a.Body,null,u.a.createElement(m.a,null,u.a.createElement(p.a,null,u.a.createElement("h1",null,"Admin data failed to read, Try again ",u.a.createElement(f.a,{variant:"primary",onClick:S},"Reload")," "))))))))}(),P?function(){if(P)return u.a.createElement(b.a,null,u.a.createElement(m.a,null,u.a.createElement(p.a,null,u.a.createElement(d.a,null,u.a.createElement(d.a.Header,null,u.a.createElement(d.a.Title,{as:"h5"},"Wait !!!.")),u.a.createElement(d.a.Body,null,u.a.createElement(m.a,null,u.a.createElement(p.a,null,u.a.createElement("h1",null,"Requesting for Admin  data"))))))))}():u.a.createElement(m.a,null,u.a.createElement(p.a,null,u.a.createElement(d.a,null,u.a.createElement(d.a.Header,null,u.a.createElement(d.a.Title,{as:"h3"},"Update the admin data")),u.a.createElement(d.a.Body,null,u.a.createElement(m.a,null,u.a.createElement(p.a,{md:6},u.a.createElement(h.a,null,u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"First name"),u.a.createElement(h.a.Control,{type:"text",placeholder:"First name",onChange:I("firstName"),value:E})),u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"Middle Name"),u.a.createElement(h.a.Control,{type:"text",placeholder:"Middle name",onChange:I("middleName"),value:w})),u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"Phone "),u.a.createElement(h.a.Control,{type:"text",placeholder:"phone",onChange:I("phone"),value:y})),u.a.createElement(h.a.Group,{controlId:"formBasicPassword"},u.a.createElement(h.a.Label,null,"Password"),u.a.createElement(h.a.Control,{type:"password",placeholder:"Password",onChange:I("password"),value:x})),L?"loading ...":u.a.createElement(f.a,{variant:"primary",onClick:function(e){return e.preventDefault(),s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!0})),""===E?(s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!1})),j.a.fire("Oops...","Admin first Name is required","error")):""===w?(s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!1})),j.a.fire("Oops...","Admin Middle Name is required","error")):""===g?(s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!1})),j.a.fire("Oops...","Admin Last Name is required","error")):""===C?(s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!1})),j.a.fire("Oops...","Email is required","error")):""===y?(s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!1})),j.a.fire("Oops...","Phone Number is required","error")):""===x?(s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!1})),j.a.fire("Oops...","Password is required","error")):x!==B?(s(Object(l.a)(Object(l.a)({},n),{},{loadingBtn:!1})),j.a.fire("Oops...","Password must match each other","error")):void q()}},"Update Admin Data .."))),u.a.createElement(p.a,{md:6},u.a.createElement(h.a.Group,{controlId:"exampleForm.ControlInput1"},u.a.createElement(h.a.Label,null,"Last name"),u.a.createElement(h.a.Control,{type:"text",placeholder:"Last name",onChange:I("lastName"),value:g})),u.a.createElement(h.a.Group,{controlId:"exampleForm.ControlInput1"},u.a.createElement(h.a.Label,null,"email "),u.a.createElement(h.a.Control,{type:"email",placeholder:"email",onChange:I("email"),value:C})),u.a.createElement(h.a.Group,{controlId:"exampleForm.ControlSelect1"},u.a.createElement(h.a.Label,null,"Admin Role "),u.a.createElement(h.a.Control,{as:"select",onChange:I("level"),value:k},u.a.createElement("option",null,"Select Role"),u.a.createElement("option",{value:"1"},"Admin"),u.a.createElement("option",{value:"2"},"Moderator"))),u.a.createElement(h.a.Group,{controlId:"formBasicPassword"},u.a.createElement(h.a.Label,null,"Password Confirmation"),u.a.createElement(h.a.Control,{type:"password",placeholder:"Password Confirmation",onChange:I("password2"),value:B})))))))))}}}]);
//# sourceMappingURL=77.d3ebd861.chunk.js.map