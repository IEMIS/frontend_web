(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[87],{124:function(e,a,t){"use strict";t.d(a,"a",(function(){return c})),t.d(a,"b",(function(){return i})),t.d(a,"d",(function(){return u})),t.d(a,"c",(function(){return s}));var n=t(55),r=t.n(n),o=t(56),l="https://iemis.herokuapp.com/api/v1",c=function(){var e=Object(o.a)(r.a.mark((function e(a,t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(l,"/students"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e)}));case 3:return n=e.sent,o=n.json(),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(r.a.mark((function e(a,t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(l,"/students"),{method:"GET",body:JSON.stringify(a),headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e)}));case 3:return n=e.sent,o=n.json(),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(r.a.mark((function e(a,t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(l,"/students/").concat(a),{method:"DELETE",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e)}));case 3:return n=e.sent,o=n.json(),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}(),s=function(){var e=Object(o.a)(r.a.mark((function e(a){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(l,"/school"),{method:"GET",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(a)}}).catch((function(e){console.log(e)}));case 3:return t=e.sent,n=t.json(),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()},235:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var n=t(55),r=t.n(n),o=t(56),l=t(32),c=t(3),i=t(64),u=t(0),s=t.n(u),m=t(81),p=t(89),d=t(82),E=t(348),v=t(165),h=t(30),b=t(63),f=t.n(b),C=t(2),g=t(124);function j(){var e=s.a.useState({studentCode:"",school:"",parent:"",stream:"",firstName:"",middleName:"",lastName:"",religion:"",gender:"",dob:"",country:"",ethnicity:"",disability:"",yearAdmission:"",presentClass:"",HadEce:"",subject:"",status:"",session:"",province:"",loading:!1,redirectToPage:!1,schoolList:[],parentList:[],subjectList:[],sessionList:[]}),a=Object(i.a)(e,2),t=a[0],n=a[1],u=t.studentCode,b=t.school,j=t.parent,O=t.presentClass,y=t.stream,S=t.firstName,L=t.middleName,x=t.lastName,N=t.gender,Y=t.religion,I=t.dob,F=t.country,G=t.disability,B=t.yearAdmission,k=t.HadEce,w=t.subject,P=t.status,T=t.session,q=t.province,A=t.ethnicity,R=t.loading,D=t.redirectToPage,H=t.schoolList,M=t.parentList,z=t.subjectList,J=t.sessionList,V=function(e){return function(a){n(Object(c.a)(Object(c.a)({},t),{},Object(l.a)({},e,a.target.value)))}},_=function(){var e=Object(o.a)(r.a.mark((function e(){var a,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={studentCode:u,school:b,parent:j,presentClass:O,stream:y,firstName:S,middleName:L,lastName:x,gender:N,religion:Y,dob:I,country:F,disability:G,yearAdmission:B,HadEce:k,subject:w,province:q},e.next=3,Object(g.a)(a);case 3:if(o=e.sent,console.log(o),o){e.next=8;break}return f.a.fire("Oops...","internet server error, Please, check your network connection","error"),e.abrupt("return",n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})));case 8:if(!o.error){e.next=11;break}return f.a.fire("Oops...",o.error,"error"),e.abrupt("return",n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})));case 11:if(!o.message){e.next=16;break}return f.a.fire("Saved...",o.message,"success"),n(Object(c.a)(Object(c.a)({},t),{},{loading:!1,redirectToPage:!0})),l=f.a.mixin({toast:!0,timerProgressBar:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),e.abrupt("return",l.fire({animation:!0,type:"success",title:"Request is successful"}));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.useEffect((function(){(function(){var e=Object(o.a)(r.a.mark((function e(){var a,t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)();case 2:a=e.sent,t="SCH".concat("0012"),n((function(e){return Object(c.a)(Object(c.a)({},e),{},{schoolList:a.data,studentCode:t})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),s.a.createElement(h.a,null,function(){if(D)return s.a.createElement(C.a,{to:"/admin/schools/create"})}(),s.a.createElement(m.a,null,s.a.createElement(p.a,null,s.a.createElement(d.a,null,s.a.createElement(d.a.Header,null,s.a.createElement(d.a.Title,{as:"h3"},"Add New Student")),s.a.createElement(d.a.Body,null,s.a.createElement(m.a,null,s.a.createElement(p.a,{md:6},s.a.createElement(E.a,null,s.a.createElement(E.a.Group,{controlId:"formBasicEmail"},s.a.createElement(E.a.Label,null,"Student Code"),s.a.createElement(E.a.Control,{type:"text",placeholder:"school code",onChange:V("studentCode"),value:u})),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"School"),s.a.createElement(E.a.Control,{as:"select",onChange:V("school"),value:b},s.a.createElement("option",null,"Select school"),H&&H.length>0?H.map((function(e,a){return s.a.createElement("option",{value:e._id},e.school)})):s.a.createElement("option",{value:"0"},"Fails to fetch school"))),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"parent"),s.a.createElement(E.a.Control,{as:"select",onChange:V("parent"),value:j},s.a.createElement("option",null,"Select Parent"),M&&M.length>0?H.map((function(e,a){return s.a.createElement("option",{value:e._id},e.school)})):s.a.createElement("option",{value:"0"},"Fails to fetch Parent"))),s.a.createElement(E.a.Group,{controlId:"formBasicEmail"},s.a.createElement(E.a.Label,null," First Name"),s.a.createElement(E.a.Control,{type:"text",placeholder:"First Name",onChange:V("firstName"),value:S})),s.a.createElement(E.a.Group,{controlId:"formBasicEmail"},s.a.createElement(E.a.Label,null,"Last Name"),s.a.createElement(E.a.Control,{type:"text",placeholder:"Surname",onChange:V("lastName"),value:x})),s.a.createElement(E.a.Group,{controlId:"formBasicEmail"},s.a.createElement(E.a.Label,null," Middle Name"),s.a.createElement(E.a.Control,{type:"text",placeholder:"Middle Name",onChange:V("middleName"),value:L})),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Religion"),s.a.createElement(E.a.Control,{as:"select",onChange:V("religion"),value:Y},s.a.createElement("option",null,"Select Religion"),s.a.createElement("option",{value:"Christainity"},"Christainity"),s.a.createElement("option",{value:"Hinduism"},"Hinduism"),s.a.createElement("option",{value:"Islam"},"Islam"),s.a.createElement("option",{value:"Tradition"},"Tradition"))),s.a.createElement(E.a.Group,{controlId:"formBasicEmail"},s.a.createElement(E.a.Label,null,"Date of Birth "),s.a.createElement(E.a.Control,{type:"date",placeholder:"date of birth on certificate",onChange:V("dob"),value:I})),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Gender"),s.a.createElement(E.a.Control,{as:"select",onChange:V("gender"),value:N},s.a.createElement("option",null,"Select Gender"),s.a.createElement("option",{value:"M"},"Male"),s.a.createElement("option",{value:"F"},"Female"))),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Province"),s.a.createElement(E.a.Control,{as:"select",onChange:V("province"),value:q},s.a.createElement("option",null,"Select Province"),s.a.createElement("option",{value:"Ba"},"Ba"),s.a.createElement("option",{value:"Bua"},"Bua"),s.a.createElement("option",{value:"Cakaudrove"},"Cakaudrove"),s.a.createElement("option",{value:"Kadavu"},"Kadavu"),s.a.createElement("option",{value:"Lau"},"Lau"),s.a.createElement("option",{value:"Laomaiviti"},"Laomaiviti"),s.a.createElement("option",{value:"Macuaa"},"Macuaa"),s.a.createElement("option",{value:"Nadroga"},"Nadroga-Navosa"),s.a.createElement("option",{value:"Naitasiri"},"Naitasiri"),s.a.createElement("option",{value:"Namosi"},"Namosi"),s.a.createElement("option",{value:"Ra"},"Ra"),s.a.createElement("option",{value:"Rewa"},"Rewa"),s.a.createElement("option",{value:"Serua"},"Serua"),s.a.createElement("option",{value:"Tailevu"},"Tailevu"))))),s.a.createElement(p.a,{md:6},s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Country"),s.a.createElement(E.a.Control,{as:"select",onChange:V("country"),value:F},s.a.createElement("option",null,"Select Country"),s.a.createElement("option",{value:"Fijian"},"Fijian Citizen"),s.a.createElement("option",{value:"International"},"International"),s.a.createElement("option",{value:"Regional"},"Regional"))),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Ethnicity"),s.a.createElement(E.a.Control,{as:"select",onChange:V("ethnicity"),value:A},s.a.createElement("option",null,"Select Ethnicity"),s.a.createElement("option",{value:"Indo-Fijian"},"Indo Fijian"),s.a.createElement("option",{value:"itaukei"},"Itaukei"),s.a.createElement("option",{value:"others"},"Others"))),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Disability"),s.a.createElement(E.a.Control,{as:"select",onChange:V("disability"),value:G},s.a.createElement("option",null,"Select Disability"),s.a.createElement("option",{value:"albinism"},"Albinism"),s.a.createElement("option",{value:"behaviour"},"Behavioural Disoder"),s.a.createElement("option",{value:"hearing"},"Hearing/Auditory Challenged"),s.a.createElement("option",{value:"intellect"},"Visually Challenged"),s.a.createElement("option",{value:"learning"},"Learning"),s.a.createElement("option",{value:"mobility"},"Mobility Restricted"),s.a.createElement("option",{value:"speech"},"Speech"),s.a.createElement("option",{value:"visual"},"Visually Challenged"),s.a.createElement("option",{value:"none"},"None"))),s.a.createElement(E.a.Group,{controlId:"formBasicEmail"},s.a.createElement(E.a.Label,null,"Admission Year "),s.a.createElement(E.a.Control,{type:"date",placeholder:"Admission Year",onChange:V("yearAdmission"),value:B})),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Present Class"),s.a.createElement(E.a.Control,{as:"select",onChange:V("presentClass"),value:O},s.a.createElement("option",null,"Select Present Class"),s.a.createElement("option",{value:"Preprimary"},"Pre-Primary"),s.a.createElement("option",{value:"Y1"},"Year 1"),s.a.createElement("option",{value:"Y2"},"Year 2"),s.a.createElement("option",{value:"Y3"},"Year 3"),s.a.createElement("option",{value:"Y4"},"Year 4"),s.a.createElement("option",{value:"Y5"},"Year 5"),s.a.createElement("option",{value:"Y6"},"Year 6"),s.a.createElement("option",{value:"Y7"},"Year 7"),s.a.createElement("option",{value:"Y8"},"Year 8"),s.a.createElement("option",{value:"Y9"},"Year 9"),s.a.createElement("option",{value:"Y10"},"Year 10"),s.a.createElement("option",{value:"Y11"},"Year 11"),s.a.createElement("option",{value:"Y12"},"Year 12"),s.a.createElement("option",{value:"Y13"},"Year 13"),s.a.createElement("option",{value:"voc1"},"Voc YR1"),s.a.createElement("option",{value:"voc2"},"Voc YR2"))),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Had ECE"),s.a.createElement(E.a.Control,{as:"select",onChange:V("HadEce"),value:k},s.a.createElement("option",null,"Select"),s.a.createElement("option",{value:"Yes"},"Yes "),s.a.createElement("option",{value:"No"},"No"))),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Subject"),s.a.createElement(E.a.Control,{as:"select",onChange:V("subject"),value:w},s.a.createElement("option",null,"Select subject"),z&&z.length>0?z.map((function(e,a){return s.a.createElement("option",{value:e._id},e.subject)})):s.a.createElement("option",{value:"0"},"Fails to fetch subject"))),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Studentship"),s.a.createElement(E.a.Control,{as:"select",onChange:V("status"),value:P},s.a.createElement("option",null,"Select student status"),s.a.createElement("option",{value:"promoter"},"Promoted"),s.a.createElement("option",{value:"dropout"},"Drop-out"),s.a.createElement("option",{value:"repeater"},"Repeater"),s.a.createElement("option",{value:"deceased"},"Deceased"),s.a.createElement("option",{value:"relocate"},"Overseas Relocation"),s.a.createElement("option",{value:"graduate"},"Graduated"))),s.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},s.a.createElement(E.a.Label,null,"Session"),s.a.createElement(E.a.Control,{as:"select",onChange:V("session"),value:T},s.a.createElement("option",null,"Select Session"),J&&J.length>0?J.map((function(e,a){return s.a.createElement("option",{value:e._id},e.session)})):s.a.createElement("option",{value:"0"},"Fails to fetch Session"))),R?"loading ...":s.a.createElement(v.a,{variant:"primary",onClick:function(e){return e.preventDefault(),n(Object(c.a)(Object(c.a)({},t),{},{loading:!0})),""===u?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","Student code is required","error")):""===b?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","School is required","error")):""===j?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","ParentID is required","error")):""===O?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","Present Class is required","error")):""===y?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","Class Stream is required","error")):""===S?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","First Name  is required","error")):""===x?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","Last Name is required","error")):""===N?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","Gender is required","error")):""===I?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","Date of Birth is required","error")):""===F?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","Country is required","error")):""===G?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","Disability is required","error")):""===P?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","Studentship status is required","error")):""===T?(n(Object(c.a)(Object(c.a)({},t),{},{loading:!1})),f.a.fire("Oops...","Academic session is required","error")):void _()}},"Create .."))))))))}}}]);
//# sourceMappingURL=87.4c39d619.chunk.js.map