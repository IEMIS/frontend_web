(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[96],{113:function(e,a,t){"use strict";t.d(a,"a",(function(){return l})),t.d(a,"c",(function(){return i})),t.d(a,"b",(function(){return s})),t.d(a,"e",(function(){return u})),t.d(a,"d",(function(){return p}));var r=t(55),n=t.n(r),o=t(56),c="https://iemis.herokuapp.com/api/v1",l=function(){var e=Object(o.a)(n.a.mark((function e(a,t){var r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/schools"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e)}));case 3:return r=e.sent,o=r.json(),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(n.a.mark((function e(a,t){var r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/schools"),{method:"GET",body:JSON.stringify(a),headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e)}));case 3:return r=e.sent,o=r.json(),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}(),s=function(){var e=Object(o.a)(n.a.mark((function e(a,t){var r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/schools/").concat(a),{method:"GET",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e)}));case 3:return r=e.sent,o=r.json(),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(n.a.mark((function e(a,t){var r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/schools/").concat(a),{method:"DELETE",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e)}));case 3:return r=e.sent,o=r.json(),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(n.a.mark((function e(a){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/district"),{method:"GET",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(a)}}).catch((function(e){console.log(e)}));case 3:return t=e.sent,r=t.json(),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()},282:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var r=t(55),n=t.n(r),o=t(56),c=t(32),l=t(3),i=t(64),s=t(0),u=t.n(s),p=t(81),m=t(89),d=t(82),h=t(348),E=t(165),f=t(30),b=t(63),v=t.n(b),O=t(2),g=t(113);function j(){var e=Object(O.g)().id,a=u.a.useState({code:"",district:"",names:"",address:"",email:"",fax:"",mailBox:"",phone:"",province:"",eduLevel:"",ownership:"",estabYear:"",schoolCat:"",schoolType:"",headID:"",password:"",password2:"",loading:!1,redirectToPage:!1,districtList:[]}),t=Object(i.a)(a,2),r=t[0],s=t[1],b=r.code,j=r.names,C=r.district,y=r.phone,x=r.email,w=r.password,S=r.password2,L=r.address,B=r.fax,T=r.mailBox,G=r.province,I=r.eduLevel,P=r.ownership,k=r.estabYear,q=r.schoolCat,D=r.schoolType,R=r.headID,F=r.loading,A=r.redirectToPage,N=r.districtList,Y=function(e){return function(a){s(Object(l.a)(Object(l.a)({},r),{},Object(c.a)({},e,a.target.value)))}},z=function(){var e=Object(o.a)(n.a.mark((function e(){var a,t,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={code:b,names:j,district:C,email:x,contact:[{phone:y,fax:B,mailBox:T,province:G,address:L}],eduLevel:I,ownership:P,estabYear:k,schoolCat:q,schoolType:D,headID:R,password:w},e.next=3,Object(g.a)(a);case 3:if(t=e.sent,console.log(t),t){e.next=8;break}return v.a.fire("Oops...","internet server error, Please, check your network connection","error"),e.abrupt("return",s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})));case 8:if(!t.error){e.next=11;break}return v.a.fire("Oops...",t.error,"error"),e.abrupt("return",s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})));case 11:if(!t.message){e.next=16;break}return v.a.fire("Saved...",t.message,"success"),s(Object(l.a)(Object(l.a)({},r),{},{loading:!1,redirectToPage:!0})),o=v.a.mixin({toast:!0,timerProgressBar:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),e.abrupt("return",o.fire({animation:!0,type:"success",title:"Request is successful"}));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.useEffect((function(){(function(){var a=Object(o.a)(n.a.mark((function a(){var t,r,o;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(g.d)();case 2:return t=a.sent,r="SCH".concat("0012"),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{districtList:t.data,code:r})})),a.next=7,Object(g.b)(e);case 7:o=a.sent,console.log(o);case 9:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[e]),u.a.createElement(f.a,null,function(){if(A)return u.a.createElement(O.a,{to:"/admin/schools/create"})}(),u.a.createElement(p.a,null,u.a.createElement(m.a,null,u.a.createElement(d.a,null,u.a.createElement(d.a.Header,null,u.a.createElement(d.a.Title,{as:"h3"},"Update School data")),u.a.createElement(d.a.Body,null,u.a.createElement(p.a,null,u.a.createElement(m.a,{md:6},u.a.createElement(h.a,null,u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"School Code"),u.a.createElement(h.a.Control,{type:"text",placeholder:"school code",onChange:Y("code"),value:b,disabled:!0})),u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"School Name"),u.a.createElement(h.a.Control,{type:"text",placeholder:"school name",onChange:Y("names"),value:j})),u.a.createElement(h.a.Group,{controlId:"exampleForm.ControlSelect1"},u.a.createElement(h.a.Label,null,"District"),u.a.createElement(h.a.Control,{as:"select",onChange:Y("district"),value:C},u.a.createElement("option",null,"Select district"),N&&N.length>0?N.map((function(e,a){return u.a.createElement("option",{value:e._id},e.names)})):u.a.createElement("option",{value:"0"},"Fails to fetch district"))),u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"Address "),u.a.createElement(h.a.Control,{type:"text",placeholder:"location, province e.g Veisaru Road, Savusavu",onChange:Y("address"),value:L})),u.a.createElement(h.a.Group,{controlId:"exampleForm.ControlSelect1"},u.a.createElement(h.a.Label,null,"Locality"),u.a.createElement(h.a.Control,{as:"select",onChange:Y("province"),value:G},u.a.createElement("option",null,"Select locality"),u.a.createElement("option",{value:"Metropolian"},"City Metropolian"),u.a.createElement("option",{value:"Surburban"},"City Surburban"),u.a.createElement("option",{value:"Urban"},"Peri Urban"),u.a.createElement("option",{value:"Remote"},"Remote"),u.a.createElement("option",{value:"Rural"},"Rural"),u.a.createElement("option",{value:"Town"},"Town"),u.a.createElement("option",{value:"Very-Remote"},"Very Remote"))),u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"Mailing Address "),u.a.createElement(h.a.Control,{type:"text",placeholder:"P.O BOX 123, Tavua",onChange:Y("mailBox"),value:T})),u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"Phone "),u.a.createElement(h.a.Control,{type:"text",placeholder:"official school phone number",onChange:Y("phone"),value:y})),u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"Fax"),u.a.createElement(h.a.Control,{type:"text",placeholder:"school fax",onChange:Y("fax"),value:B})),u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"School Head"),u.a.createElement(h.a.Control,{type:"text",placeholder:"staff ID",onChange:Y("headID"),value:R})))),u.a.createElement(m.a,{md:6},u.a.createElement(h.a.Group,{controlId:"exampleForm.ControlSelect1"},u.a.createElement(h.a.Label,null,"Education Level"),u.a.createElement(h.a.Control,{as:"select",onChange:Y("eduLevel"),value:I},u.a.createElement("option",null,"Select Education Level"),u.a.createElement("option",{value:"ECE"},"ECE"),u.a.createElement("option",{value:"Primary"},"Primary"),u.a.createElement("option",{value:"Secondary"},"Secondary"),u.a.createElement("option",{value:"TVET"},"TVET"))),u.a.createElement(h.a.Group,{controlId:"formBasicEmail"},u.a.createElement(h.a.Label,null,"Estab. Year "),u.a.createElement(h.a.Control,{type:"date",placeholder:"year founded",onChange:Y("estabYear"),value:k})),u.a.createElement(h.a.Group,{controlId:"exampleForm.ControlSelect1"},u.a.createElement(h.a.Label,null,"Ownership"),u.a.createElement(h.a.Control,{as:"select",onChange:Y("ownership"),value:P},u.a.createElement("option",null,"Select School Ownership"),u.a.createElement("option",{value:"Government"},"Government"),u.a.createElement("option",{value:"Non-Government"},"Non-Government"),u.a.createElement("option",{value:"Private"},"Private"))),u.a.createElement(h.a.Group,{controlId:"exampleForm.ControlSelect1"},u.a.createElement(h.a.Label,null,"School Category"),u.a.createElement(h.a.Control,{as:"select",onChange:Y("schoolCat"),value:q},u.a.createElement("option",null,"Select School Category"),u.a.createElement("option",{value:"Regular"},"Regular"),u.a.createElement("option",{value:"Special"},"Special"))),u.a.createElement(h.a.Group,{controlId:"exampleForm.ControlSelect1"},u.a.createElement(h.a.Label,null,"School Type"),u.a.createElement(h.a.Control,{as:"select",onChange:Y("schoolType"),value:D},u.a.createElement("option",null,"Select School Type"),u.a.createElement("option",{value:"Day"},"Day"),u.a.createElement("option",{value:"Boarding1"},"Registered Boarding"),u.a.createElement("option",{value:"Boarding2"},"Unregistered Boarding"))),u.a.createElement(h.a.Group,{controlId:"exampleForm.ControlInput1"},u.a.createElement(h.a.Label,null,"email "),u.a.createElement(h.a.Control,{type:"email",placeholder:"email",onChange:Y("email"),value:x})),u.a.createElement(h.a.Group,{controlId:"formBasicPassword"},u.a.createElement(h.a.Label,null,"Password"),u.a.createElement(h.a.Control,{type:"password",placeholder:"Password",onChange:Y("password"),value:w})),u.a.createElement(h.a.Group,{controlId:"formBasicPassword"},u.a.createElement(h.a.Label,null,"Password Confirmation"),u.a.createElement(h.a.Control,{type:"password",placeholder:"Password Confirmation",onChange:Y("password2"),value:S})),F?"loading ...":u.a.createElement(E.a,{variant:"primary",onClick:function(e){return e.preventDefault(),s(Object(l.a)(Object(l.a)({},r),{},{loading:!0})),""===b?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","School code is required","error")):""===C?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","District is required","error")):""===j?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","School Name is required","error")):""===D?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","School Type is required","error")):""===q?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","School Category is required","error")):""===k?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","Establishment Year is required","error")):""===P?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","School ownership is required","error")):""===I?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","Education Level is required","error")):""===G?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","School locality is required","error")):""===T?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","School mailBox is required","error")):""===B?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","Fax is required","error")):""===y?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","Phone number is required","error")):""===L?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","District address is required","error")):""===x?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","District email is required","error")):""===w?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","Password must empty","error")):w!==S?(s(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.a.fire("Oops...","Password must match each other","error")):void z()}},"Update .."))))))))}}}]);
//# sourceMappingURL=96.b535a626.chunk.js.map