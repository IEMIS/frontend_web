{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\VP\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\VP\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\VP\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\VP\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\VP\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{Row,Col,Card,Form,Button}from'react-bootstrap';import Aux from\"../../../hoc/_Aux\";import Swal from'sweetalert2';import{Redirect}from'react-router-dom';import{create,readsDistrict}from'./api';export default function Create(){var _React$useState=React.useState({staffCode:\"\",district:\"\",firstName:\"\",title:\"\",email:\"\",lastName:\"\",gender:\"\",middleName:\"\",phone:\"\",dob:\"\",role:\"\",nationality:\"\",designation:\"\",password:\"\",password2:\"\",loading:false,redirectToPage:false,districtList:[]}),_React$useState2=_slicedToArray(_React$useState,2),values=_React$useState2[0],setValues=_React$useState2[1];var staffCode=values.staffCode,firstName=values.firstName,district=values.district,phone=values.phone,email=values.email,password=values.password,password2=values.password2,role=values.role,lastName=values.lastName,middleName=values.middleName,title=values.title,gender=values.gender,dob=values.dob,nationality=values.nationality,designation=values.designation,loading=values.loading,redirectToPage=values.redirectToPage,districtList=values.districtList;var handleChange=function handleChange(name){return function(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,event.target.value)));};};var submit=function submit(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{loading:true}));if(staffCode===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','Staff code is required','error');}if(district===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','District is required','error');}if(firstName===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','First Name is required','error');}if(lastName===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','Last Name is required','error');}if(gender===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','Gender is required','error');}if(dob===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','Date of Birth is required','error');}if(nationality===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','School ownership is required','error');}if(email===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','Email is required','error');}if(phone===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','Phone number is required','error');}if(password===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','Password must empty','error');}if(password!==password2){setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));return Swal.fire('Oops...','Password must match each other','error');}handleCreate();};var handleCreate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var staff,data,Toast;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://const user = {code, names,district, phone, email, password, password2, address,fax,mailBox,province,eduLevel,ownership,estabYear,schoolCat,schoolType,headID, loading, redirectToPage, districtList}\nstaff={staffCode:staffCode,firstName:firstName,district:district,email:email,middleName:middleName,role:role,lastName:lastName,title:title,gender:gender,dob:dob,designation:designation,password:password};_context.next=3;return create(staff);case 3:data=_context.sent;console.log(data);if(data){_context.next=8;break;}Swal.fire('Oops...','internet server error, Please, check your network connection','error');return _context.abrupt(\"return\",setValues(_objectSpread(_objectSpread({},values),{},{loading:false})));case 8:if(!data.error){_context.next=11;break;}Swal.fire('Oops...',data.error,'error');return _context.abrupt(\"return\",setValues(_objectSpread(_objectSpread({},values),{},{loading:false})));case 11:if(!data.message){_context.next=16;break;}Swal.fire('Saved...',data.message,'success');setValues(_objectSpread(_objectSpread({},values),{},{loading:false,redirectToPage:true}));Toast=Swal.mixin({toast:true,timerProgressBar:true,position:'top-end',showConfirmButton:false,timer:3000});return _context.abrupt(\"return\",Toast.fire({animation:true,type:'success',title:'Request is successful'}));case 16:case\"end\":return _context.stop();}}},_callee);}));return function handleCreate(){return _ref.apply(this,arguments);};}();var redirectUser=function redirectUser(){if(redirectToPage){return/*#__PURE__*/React.createElement(Redirect,{to:\"/admin/staffs/create\"});}};React.useEffect(function(){var bootstrap=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var dist,code;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return readsDistrict();case 2:dist=_context2.sent;code=\"MOE\".concat(\"0012\");setValues(function(v){return _objectSpread(_objectSpread({},v),{},{districtList:dist.data,code:code});});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function bootstrap(){return _ref2.apply(this,arguments);};}();bootstrap();},[]);return/*#__PURE__*/React.createElement(Aux,null,redirectUser(),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{as:\"h3\"},\"Add New Staff\")),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Staff Code\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Staff code\",onChange:handleChange(\"staffCode\"),value:staffCode,disabled:true})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlSelect1\"},/*#__PURE__*/React.createElement(Form.Label,null,\"District\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",onChange:handleChange(\"district\"),value:district},/*#__PURE__*/React.createElement(\"option\",null,\"Select district\"),districtList&&districtList.length>0?districtList.map(function(dist,id){return/*#__PURE__*/React.createElement(\"option\",{value:dist._id},dist.names);}):/*#__PURE__*/React.createElement(\"option\",{value:\"0\"},\"Fails to fetch district\"))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlSelect1\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Title\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",onChange:handleChange(\"title\"),value:title},/*#__PURE__*/React.createElement(\"option\",null,\"Select\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Mr.\"},\"Mr.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Mrs.\"},\"Mrs.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Ms.\"},\"Ms.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Miss.\"},\"Miss.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Dr.\"},\"Dr.\"))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"First Name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"First Name\",onChange:handleChange(\"firstName\"),value:firstName})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Middle Name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Middle Name\",onChange:handleChange(\"middleName\"),value:middleName})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Last Name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Last Name\",onChange:handleChange(\"lastName\"),value:lastName})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Phone \"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"official school phone number\",onChange:handleChange(\"phone\"),value:phone})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicPassword\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Password\",onChange:handleChange(\"password\"),value:password})))),/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Date of Birth \"),/*#__PURE__*/React.createElement(Form.Control,{type:\"date\",placeholder:\"dob\",onChange:handleChange(\"dob\"),value:dob})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlSelect1\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Gender\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",onChange:handleChange(\"gender\"),value:gender},/*#__PURE__*/React.createElement(\"option\",null,\"Select \"),/*#__PURE__*/React.createElement(\"option\",{value:\"Male\"},\"Male\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Female\"},\"Female\"))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlSelect1\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Nationality\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",onChange:handleChange(\"nationality\"),value:nationality},/*#__PURE__*/React.createElement(\"option\",null,\"Select \"),/*#__PURE__*/React.createElement(\"option\",{value:\"Fijian\"},\"Male\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Regional\"},\"Female\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Foreigner\"},\"Foreigner\"))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlSelect1\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Role\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",onChange:handleChange(\"role\"),value:role},/*#__PURE__*/React.createElement(\"option\",null,\"Select \"),/*#__PURE__*/React.createElement(\"option\",{value:\"Read1\"},\"Read-Only\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Read2\"},\"Read-Write\"))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Designation\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Senior Education Officer\",onChange:handleChange(\"designatioon\"),value:designation})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlInput1\"},/*#__PURE__*/React.createElement(Form.Label,null,\"email \"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"email\",onChange:handleChange(\"email\"),value:email})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicPassword\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password Confirmation\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Password Confirmation\",onChange:handleChange(\"password2\"),value:password2})),loading?\"loading ...\":/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:submit},\"Create ..\"))))))));}","map":{"version":3,"sources":["C:/Users/VP/web/src/screen/admin/staffs/Create.js"],"names":["React","Row","Col","Card","Form","Button","Aux","Swal","Redirect","create","readsDistrict","Create","useState","staffCode","district","firstName","title","email","lastName","gender","middleName","phone","dob","role","nationality","designation","password","password2","loading","redirectToPage","districtList","values","setValues","handleChange","name","event","target","value","submit","preventDefault","fire","handleCreate","staff","data","console","log","error","message","Toast","mixin","toast","timerProgressBar","position","showConfirmButton","timer","animation","type","redirectUser","useEffect","bootstrap","dist","code","v","length","map","id","_id","names"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {Row, Col, Card, Form, Button} from 'react-bootstrap';\r\nimport Aux from \"../../../hoc/_Aux\";\r\nimport Swal from 'sweetalert2'\r\nimport {Redirect} from 'react-router-dom'\r\nimport { create, readsDistrict } from './api';\r\n\r\n\r\nexport default function Create() {\r\n\r\n    const [values, setValues] = React.useState({\r\n        staffCode:\"\",\r\n        district:\"\",\r\n        firstName:\"\",\r\n        title:\"\",\r\n        email:\"\",\r\n        lastName:\"\",\r\n        gender:\"\",\r\n        middleName:\"\",\r\n        phone:\"\",\r\n        dob:\"\",\r\n        role:\"\",\r\n        nationality:\"\",\r\n        designation:\"\",\r\n        password:\"\",\r\n        password2:\"\",\r\n        loading:false,\r\n        redirectToPage:false,\r\n        districtList:[]\r\n    })\r\n    const {staffCode, firstName,district, phone, email, password, password2,role, lastName,middleName,title,gender,dob, nationality,designation,loading, redirectToPage, districtList} = values\r\n\r\n    const handleChange = name=>event=>{\r\n        setValues({...values, [name]:event.target.value})\r\n    }\r\n\r\n    const submit = event =>{\r\n        event.preventDefault();\r\n        setValues({...values, loading:true})\r\n        if(staffCode===\"\"){ \r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'Staff code is required', 'error');\r\n        }\r\n        if(district===\"\"){ \r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'District is required', 'error');\r\n        }\r\n        if(firstName===\"\"){ \r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'First Name is required', 'error');\r\n        }\r\n        if(lastName===\"\"){ \r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'Last Name is required', 'error');\r\n        }\r\n        if(gender===\"\"){ \r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'Gender is required', 'error');\r\n        }\r\n        if(dob===\"\"){ \r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'Date of Birth is required', 'error');\r\n        }\r\n        if(nationality===\"\"){ \r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'School ownership is required', 'error');\r\n        }\r\n        if(email===\"\"){ \r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'Email is required', 'error');\r\n        }\r\n        if(phone===\"\"){ \r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'Phone number is required', 'error');\r\n        }\r\n\r\n        if(password===\"\") {\r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'Password must empty', 'error');\r\n        }\r\n\r\n        if(password !== password2) {\r\n            setValues({...values, loading:false})\r\n            return Swal.fire('Oops...', 'Password must match each other', 'error');\r\n        }\r\n        handleCreate();\r\n    }\r\n\r\n    const handleCreate =async ()=>{\r\n        //const user = {code, names,district, phone, email, password, password2, address,fax,mailBox,province,eduLevel,ownership,estabYear,schoolCat,schoolType,headID, loading, redirectToPage, districtList}\r\n        const staff = {staffCode, firstName, district, email, middleName, role, lastName, title, gender, dob, designation, password}\r\n        const data = await create(staff);\r\n        console.log(data)\r\n        if(!data){\r\n            Swal.fire('Oops...', 'internet server error, Please, check your network connection', 'error')\r\n            return setValues({...values, loading:false})\r\n        }\r\n\r\n        if(data.error){\r\n            Swal.fire('Oops...', data.error, 'error')\r\n            return setValues({...values, loading:false})\r\n        }\r\n\r\n        if(data.message){\r\n            Swal.fire('Saved...', data.message, 'success')\r\n           setValues({...values, loading:false, redirectToPage:true})\r\n           let Toast = Swal.mixin({\r\n            toast: true,\r\n            timerProgressBar: true,\r\n            position: 'top-end',\r\n            showConfirmButton: false,\r\n            timer: 3000\r\n            });\r\n\r\n            return Toast.fire({\r\n                animation: true,\r\n                type: 'success',\r\n                title: 'Request is successful'\r\n            })\r\n        }\r\n    }\r\n\r\n    const redirectUser = () => {\r\n        if (redirectToPage){\r\n            return <Redirect to=\"/admin/staffs/create\" />\r\n        }\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        const bootstrap = async () =>{\r\n            const dist = await readsDistrict();\r\n            let code = `MOE${`0012`}`;\r\n            setValues(v => ({...v, districtList:dist.data, code})); \r\n        }\r\n        bootstrap()\r\n    }, [])\r\n\r\n    return (\r\n        <Aux>\r\n            {redirectUser()}\r\n            <Row>\r\n                    <Col>\r\n                        <Card>\r\n                            <Card.Header>\r\n                                <Card.Title as=\"h3\">Add New Staff</Card.Title>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <Row>\r\n                                    <Col md={6}>\r\n                                        <Form>\r\n                                            <Form.Group controlId=\"formBasicEmail\">\r\n                                                <Form.Label>Staff Code</Form.Label>\r\n                                                <Form.Control type=\"text\" placeholder=\"Staff code\" onChange={handleChange(\"staffCode\")} value={staffCode} disabled />\r\n                                            </Form.Group>\r\n                                            <Form.Group controlId=\"exampleForm.ControlSelect1\">\r\n                                            <Form.Label>District</Form.Label>\r\n                                            <Form.Control as=\"select\" onChange={handleChange(\"district\")} value={district}>\r\n                                                <option>Select district</option>\r\n                                               {\r\n                                                   districtList && districtList.length > 0 \r\n                                                   ?\r\n                                                   districtList.map((dist, id)=>{\r\n                                                       return(\r\n                                                        <option value={dist._id}>{dist.names}</option>\r\n                                                       ) \r\n                                                   }) : <option value=\"0\">Fails to fetch district</option>\r\n                                               }\r\n                                            </Form.Control>\r\n                                            </Form.Group>\r\n                                          <Form.Group controlId=\"exampleForm.ControlSelect1\">\r\n                                            <Form.Label>Title</Form.Label>\r\n                                            <Form.Control as=\"select\" onChange={handleChange(\"title\")} value={title}>\r\n                                                <option>Select</option>\r\n                                                <option value=\"Mr.\">Mr.</option>\r\n                                                <option value=\"Mrs.\">Mrs.</option>\r\n                                                <option value=\"Ms.\">Ms.</option>\r\n                                                <option value=\"Miss.\">Miss.</option>\r\n                                                <option value=\"Dr.\">Dr.</option>\r\n                                            </Form.Control>\r\n                                            </Form.Group>\r\n                                            <Form.Group controlId=\"formBasicEmail\">\r\n                                                <Form.Label>First Name</Form.Label>\r\n                                                <Form.Control type=\"text\" placeholder=\"First Name\" onChange={handleChange(\"firstName\")} value={firstName} />\r\n                                            </Form.Group>\r\n                                            <Form.Group controlId=\"formBasicEmail\">\r\n                                                <Form.Label>Middle Name</Form.Label>\r\n                                                <Form.Control type=\"text\" placeholder=\"Middle Name\" onChange={handleChange(\"middleName\")} value={middleName} />\r\n                                            </Form.Group>\r\n                                            <Form.Group controlId=\"formBasicEmail\">\r\n                                                <Form.Label>Last Name</Form.Label>\r\n                                                <Form.Control type=\"text\" placeholder=\"Last Name\" onChange={handleChange(\"lastName\")} value={lastName} />\r\n                                            </Form.Group>\r\n                                            <Form.Group controlId=\"formBasicEmail\">\r\n                                                <Form.Label>Phone </Form.Label>\r\n                                                <Form.Control type=\"text\" placeholder=\"official school phone number\" onChange={handleChange(\"phone\")} value={phone} />\r\n                                            </Form.Group>\r\n                                              <Form.Group controlId=\"formBasicPassword\">\r\n                                                <Form.Label>Password</Form.Label>\r\n                                                <Form.Control type=\"password\" placeholder=\"Password\" onChange={handleChange(\"password\")} value={password} />\r\n                                            </Form.Group>\r\n                                        </Form>\r\n                                    </Col>\r\n                                    <Col md={6}>\r\n                                     <Form.Group controlId=\"formBasicEmail\">\r\n                                                <Form.Label>Date of Birth </Form.Label>\r\n                                                <Form.Control type=\"date\" placeholder=\"dob\" onChange={handleChange(\"dob\")} value={dob} />\r\n                                            </Form.Group>\r\n                                            <Form.Group controlId=\"exampleForm.ControlSelect1\">\r\n                                            <Form.Label>Gender</Form.Label>\r\n                                            <Form.Control as=\"select\" onChange={handleChange(\"gender\")} value={gender}>\r\n                                                <option>Select </option>\r\n                                                <option value=\"Male\">Male</option>\r\n                                                <option value=\"Female\">Female</option>\r\n                                            </Form.Control>\r\n                                            </Form.Group>\r\n                                            <Form.Group controlId=\"exampleForm.ControlSelect1\">\r\n                                            <Form.Label>Nationality</Form.Label>\r\n                                            <Form.Control as=\"select\" onChange={handleChange(\"nationality\")} value={nationality}>\r\n                                                <option>Select </option>\r\n                                                <option value=\"Fijian\">Male</option>\r\n                                                <option value=\"Regional\">Female</option>\r\n                                                <option value=\"Foreigner\">Foreigner</option>\r\n                                            </Form.Control>\r\n                                            </Form.Group>\r\n                                        <Form.Group controlId=\"exampleForm.ControlSelect1\">\r\n                                            <Form.Label>Role</Form.Label>\r\n                                            <Form.Control as=\"select\" onChange={handleChange(\"role\")} value={role}>\r\n                                                <option>Select </option>\r\n                                                <option value=\"Read1\">Read-Only</option>\r\n                                                <option value=\"Read2\">Read-Write</option>\r\n                                            </Form.Control>\r\n                                            </Form.Group>\r\n                                       <Form.Group controlId=\"formBasicEmail\">\r\n                                                <Form.Label>Designation</Form.Label>\r\n                                                <Form.Control type=\"text\" placeholder=\"Senior Education Officer\" onChange={handleChange(\"designatioon\")} value={designation} />\r\n                                            </Form.Group>\r\n                                        <Form.Group controlId=\"exampleForm.ControlInput1\">\r\n                                            <Form.Label>email </Form.Label>\r\n                                            <Form.Control type=\"email\" placeholder=\"email\" onChange={handleChange(\"email\")} value={email}/>\r\n                                        </Form.Group>\r\n                                        <Form.Group controlId=\"formBasicPassword\">\r\n                                            <Form.Label>Password Confirmation</Form.Label>\r\n                                            <Form.Control type=\"password\" placeholder=\"Password Confirmation\" onChange={handleChange(\"password2\")} value={password2} />\r\n                                        </Form.Group>\r\n                                        \r\n                                        {\r\n                                                loading ? \"loading ...\" : <Button variant=\"primary\" onClick={submit}  >Create ..</Button>\r\n                                            }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n        </Aux>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}