{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\VP\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\VP\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\VP\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\VP\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\VP\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{Row,Col,Card,Form,Button}from'react-bootstrap';import Aux from\"../../../hoc/_Aux\";import Swal from'sweetalert2';import{read,edit}from'./api';import{useParams,Redirect}from\"react-router-dom\";export default function Edit(){var _useParams=useParams(),id=_useParams.id;var _React$useState=React.useState({firstName:\"\",lastName:\"\",middleName:\"\",phone:\"\",email:\"\",password:\"\",password2:\"\",level:\"\",loading:false,redirectToPage:false,error:false,reload:false,loadingBtn:false,token:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),values=_React$useState2[0],setValues=_React$useState2[1];var firstName=values.firstName,lastName=values.lastName,middleName=values.middleName,phone=values.phone,email=values.email,password=values.password,password2=values.password2,level=values.level,error=values.error,loading=values.loading,reload=values.reload,redirectToPage=values.redirectToPage,loadingBtn=values.loadingBtn,token=values.token;var handleChange=function handleChange(name){return function(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,event.target.value)));//setSecret(s => ({ ...s, value: target.value }));\n};};var submit=function submit(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:true}));if(firstName===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:false}));return Swal.fire('Oops...','Admin first Name is required','error');}if(middleName===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:false}));return Swal.fire('Oops...','Admin Middle Name is required','error');}if(lastName===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:false}));return Swal.fire('Oops...','Admin Last Name is required','error');}if(email===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:false}));return Swal.fire('Oops...','Email is required','error');}if(phone===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:false}));return Swal.fire('Oops...','Phone Number is required','error');}if(password===\"\"){setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:false}));return Swal.fire('Oops...','Password is required','error');}if(password!==password2){setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:false}));return Swal.fire('Oops...','Password must match each other','error');}handleUpdate();};var handleUpdate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user,data,Toast;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user={firstName:firstName,lastName:lastName,middleName:middleName,phone:phone,email:email,password:password,password2:password2,level:level};_context.next=3;return edit(id,user,token);case 3:data=_context.sent;console.log(data);if(data){_context.next=8;break;}Swal.fire('Oops...','internet server error, Please, check your network connection','error');return _context.abrupt(\"return\",setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:false})));case 8:if(!data.error){_context.next=11;break;}Swal.fire('Oops...',data.error,'error');return _context.abrupt(\"return\",setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:false})));case 11:if(!data.message){_context.next=16;break;}Toast=Swal.mixin({toast:true,timerProgressBar:true,position:'top-end',showConfirmButton:false,timer:3000});Toast.fire({animation:true,type:'success',title:'Request is successful'});setValues(_objectSpread(_objectSpread({},values),{},{loadingBtn:false,redirectToPage:true}));return _context.abrupt(\"return\",Swal.fire('saved...',data.message,'success'));case 16:case\"end\":return _context.stop();}}},_callee);}));return function handleUpdate(){return _ref.apply(this,arguments);};}();var redirectUser=function redirectUser(){if(redirectToPage){return/*#__PURE__*/React.createElement(Redirect,{to:\"/admin/users/read\"});}};var isLoading=function isLoading(){if(loading){return/*#__PURE__*/React.createElement(Aux,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{as:\"h5\"},\"Wait !!!.\")),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Requesting for Admin  data\"))))))));}};var isError=function isError(){if(error){return/*#__PURE__*/React.createElement(Aux,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{as:\"h5\"},\"Error in reading this user .\")),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Admin data failed to read, Try again \",/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:handleReload},\"Reload\"),\" \"))))))));}};var handleReload=function handleReload(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{loading:false,error:false,reload:!reload}));};React.useEffect(function(){var ignore=false;var bootstrap=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data,Toast;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setValues(function(v){return _objectSpread(_objectSpread({},v),{},{loading:true});});_context2.next=3;return read(id);case 3:data=_context2.sent;if(ignore){_context2.next=18;break;}if(data){_context2.next=9;break;}Swal.fire('Oops...','internet server error, Please, check your network connection','error');setValues(function(v){return _objectSpread(_objectSpread({},v),{},{loading:false,error:true});});//setSecret(s => ({...s, countSecrets: s.countSecrets + 1}));\nreturn _context2.abrupt(\"return\");case 9:if(!data.error){_context2.next=13;break;}Swal.fire('Oops...',data.error,'error');//setValues({...values, loading:false, error:true})\nsetValues(function(v){return _objectSpread(_objectSpread({},v),{},{loading:false,error:true});});return _context2.abrupt(\"return\");case 13:if(!data.message){_context2.next=18;break;}Toast=Swal.mixin({toast:true,timerProgressBar:true,position:'top-end',showConfirmButton:false,timer:3000});Toast.fire({showClass:true,type:'success',title:data.message});setValues(function(v){return _objectSpread(_objectSpread({},v),{},{loading:false,error:false,firstName:data.data.firstName,lastName:data.data.lastName,phone:data.data.phone,middleName:data.data.middleName,email:data.data.email,level:data.data.level});});return _context2.abrupt(\"return\",Swal.fire('Great',data.message,'success'));case 18:case\"end\":return _context2.stop();}}},_callee2);}));return function bootstrap(){return _ref2.apply(this,arguments);};}();bootstrap();return function(){ignore=true;};},[reload,id]);return/*#__PURE__*/React.createElement(Aux,null,redirectUser(),isError(),loading?isLoading():/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{as:\"h3\"},\"Update the admin data\")),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"First name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"First name\",onChange:handleChange(\"firstName\"),value:firstName})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Middle Name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Middle name\",onChange:handleChange(\"middleName\"),value:middleName})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Phone \"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"phone\",onChange:handleChange(\"phone\"),value:phone})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicPassword\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Password\",onChange:handleChange(\"password\"),value:password})),loadingBtn?\"loading ...\":/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:submit},\"Update Admin Data ..\"))),/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlInput1\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Last name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Last name\",onChange:handleChange(\"lastName\"),value:lastName})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlInput1\"},/*#__PURE__*/React.createElement(Form.Label,null,\"email \"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"email\",onChange:handleChange(\"email\"),value:email})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlSelect1\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Admin Role \"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",onChange:handleChange(\"level\"),value:level},/*#__PURE__*/React.createElement(\"option\",null,\"Select Role\"),/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},\"Admin\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\"},\"Moderator\"))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicPassword\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password Confirmation\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Password Confirmation\",onChange:handleChange(\"password2\"),value:password2})))))))));}","map":{"version":3,"sources":["C:/Users/VP/web/src/screen/admin/admin/Edit.js"],"names":["React","Row","Col","Card","Form","Button","Aux","Swal","read","edit","useParams","Redirect","Edit","id","useState","firstName","lastName","middleName","phone","email","password","password2","level","loading","redirectToPage","error","reload","loadingBtn","token","values","setValues","handleChange","name","event","target","value","submit","preventDefault","fire","handleUpdate","user","data","console","log","message","Toast","mixin","toast","timerProgressBar","position","showConfirmButton","timer","animation","type","title","redirectUser","isLoading","isError","handleReload","useEffect","ignore","bootstrap","v","showClass"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {Row, Col, Card, Form, Button} from 'react-bootstrap';\r\nimport Aux from \"../../../hoc/_Aux\";\r\nimport Swal from 'sweetalert2'\r\nimport {read, edit } from './api';\r\nimport { useParams, Redirect } from \"react-router-dom\";\r\n\r\nexport default function Edit() {\r\n\r\n    let { id } = useParams();\r\n\r\n    const [values, setValues] = React.useState({\r\n        firstName:\"\",\r\n        lastName:\"\",\r\n        middleName:\"\",\r\n        phone:\"\",\r\n        email:\"\",\r\n        password:\"\",\r\n        password2:\"\",\r\n        level:\"\",\r\n        loading:false,\r\n        redirectToPage:false,\r\n        error:false,\r\n        reload:false,\r\n        loadingBtn:false,\r\n        token:\"\",\r\n    })\r\n\r\n    const {firstName, lastName, middleName, phone, email, password, password2, level, error, loading, reload, redirectToPage, loadingBtn, token} = values\r\n\r\n    const handleChange = name=>event=>{\r\n        setValues({...values, [name]:event.target.value})\r\n        //setSecret(s => ({ ...s, value: target.value }));\r\n    }\r\n\r\n    const submit = event =>{\r\n        event.preventDefault();\r\n        setValues({...values, loadingBtn:true})\r\n        if(firstName===\"\"){ \r\n            setValues({...values, loadingBtn:false})\r\n            return Swal.fire('Oops...', 'Admin first Name is required', 'error');\r\n        }\r\n        if(middleName===\"\"){ \r\n            setValues({...values, loadingBtn:false})\r\n            return Swal.fire('Oops...', 'Admin Middle Name is required', 'error');\r\n        }\r\n        if(lastName===\"\"){ \r\n            setValues({...values, loadingBtn:false})\r\n            return Swal.fire('Oops...', 'Admin Last Name is required', 'error');\r\n        }\r\n        if(email===\"\"){ \r\n            setValues({...values, loadingBtn:false})\r\n            return Swal.fire('Oops...', 'Email is required', 'error');\r\n        }\r\n        if(phone===\"\"){ \r\n            setValues({...values, loadingBtn:false})\r\n            return Swal.fire('Oops...', 'Phone Number is required', 'error');\r\n        }\r\n        if(password ===\"\") {\r\n            setValues({...values, loadingBtn:false})\r\n            return Swal.fire('Oops...', 'Password is required', 'error');\r\n        }\r\n        if(password !== password2) {\r\n            setValues({...values, loadingBtn:false})\r\n            return Swal.fire('Oops...', 'Password must match each other', 'error');\r\n        }\r\n        handleUpdate();\r\n    }\r\n\r\n    const handleUpdate =async ()=>{\r\n        const user = {firstName, lastName, middleName, phone, email, password, password2, level}\r\n        const data = await edit(id,user,token);\r\n        console.log(data)\r\n        if(!data){\r\n            Swal.fire('Oops...', 'internet server error, Please, check your network connection', 'error')\r\n            return setValues({...values, loadingBtn:false})\r\n        }\r\n\r\n        if(data.error){\r\n            Swal.fire('Oops...', data.error, 'error')\r\n            return setValues({...values, loadingBtn:false})\r\n        }\r\n\r\n        if(data.message){\r\n            \r\n            let Toast = Swal.mixin({\r\n                toast: true,\r\n                timerProgressBar: true,\r\n                position: 'top-end',\r\n                showConfirmButton: false,\r\n                timer: 3000\r\n            });\r\n    \r\n            Toast.fire({\r\n                animation: true,\r\n                type: 'success',\r\n                title: 'Request is successful'\r\n            })\r\n           setValues({...values, loadingBtn:false, redirectToPage:true})\r\n           return Swal.fire('saved...', data.message, 'success')\r\n        }\r\n    }\r\n\r\n    const redirectUser = () => {\r\n        if (redirectToPage){\r\n            return <Redirect to=\"/admin/users/read\" />\r\n        }\r\n    };\r\n\r\n    const isLoading= () => {\r\n        if(loading){\r\n            return (\r\n                <Aux>\r\n                    <Row>\r\n                        <Col>\r\n                        <Card>\r\n                            <Card.Header>\r\n                                <Card.Title as=\"h5\">Wait !!!.</Card.Title>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <Row>\r\n                                    <Col>\r\n                                        <h1>Requesting for Admin  data</h1>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Card.Body>\r\n                        </Card>\r\n                        </Col>\r\n                    </Row>\r\n                </Aux>\r\n            )\r\n        }\r\n    };\r\n\r\n    const isError = () => {\r\n        if(error){\r\n            return (\r\n                <Aux>\r\n                    <Row>\r\n                        <Col>\r\n                        <Card>\r\n                            <Card.Header>\r\n                                <Card.Title as=\"h5\">Error in reading this user .</Card.Title>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <Row>\r\n                                    <Col>\r\n                                        <h1>Admin data failed to read, Try again <Button variant=\"primary\" onClick={handleReload}>Reload</Button> </h1>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Card.Body>\r\n                        </Card>\r\n                        </Col>\r\n                    </Row>\r\n                </Aux>\r\n            )\r\n        }\r\n    };\r\n\r\n    const handleReload = event =>{\r\n        event.preventDefault();\r\n        setValues({...values, loading:false, error:false, reload:!reload})\r\n    }\r\n\r\n    \r\n\r\n    React.useEffect(() => {\r\n        let ignore = false;\r\n        const bootstrap = async ()=>{\r\n            setValues(v => ({...v, loading:true}))\r\n            const data = await read(id);\r\n            if (!ignore){\r\n                if(!data){\r\n                    Swal.fire('Oops...', 'internet server error, Please, check your network connection', 'error');\r\n                    setValues(v => ({...v, loading:false, error:true}))  \r\n                    //setSecret(s => ({...s, countSecrets: s.countSecrets + 1}));\r\n                    return  \r\n                }\r\n                if(data.error){\r\n                    Swal.fire('Oops...', data.error, 'error')\r\n                    //setValues({...values, loading:false, error:true})\r\n                    setValues(v => ({...v, loading:false, error:true})) \r\n                    return \r\n                }\r\n        \r\n                if(data.message){\r\n                    let Toast = Swal.mixin({\r\n                        toast: true,\r\n                        timerProgressBar: true,\r\n                        position: 'top-end',\r\n                        showConfirmButton: false,\r\n                        timer: 3000\r\n                    });\r\n                    Toast.fire({\r\n                        showClass: true,\r\n                        type: 'success',\r\n                        title: data.message\r\n                    })\r\n                    setValues(v => ({...v, loading:false, error:false, firstName:data.data.firstName, lastName:data.data.lastName, phone:data.data.phone, middleName:data.data.middleName, email:data.data.email, level:data.data.level}))\r\n                    return Swal.fire('Great', data.message, 'success');\r\n                } \r\n            }\r\n         \r\n        }\r\n        bootstrap()\r\n        return () => { ignore = true };\r\n    },[reload, id])\r\n\r\n    return (\r\n        <Aux>\r\n            {redirectUser()}\r\n            {isError()}\r\n            {loading ? isLoading() :\r\n                <Row>\r\n                    <Col>\r\n                        <Card>\r\n                            <Card.Header>\r\n                                <Card.Title as=\"h3\">Update the admin data</Card.Title>\r\n                            </Card.Header>\r\n                                <Card.Body>\r\n                                    <Row>\r\n                                        <Col md={6}>\r\n                                            <Form>\r\n                                                <Form.Group controlId=\"formBasicEmail\">\r\n                                                    <Form.Label>First name</Form.Label>\r\n                                                    <Form.Control type=\"text\" placeholder=\"First name\" onChange={handleChange(\"firstName\")} value={firstName} />\r\n                                                </Form.Group>\r\n\r\n                                                <Form.Group controlId=\"formBasicEmail\">\r\n                                                    <Form.Label>Middle Name</Form.Label>\r\n                                                    <Form.Control type=\"text\" placeholder=\"Middle name\" onChange={handleChange(\"middleName\")} value={middleName} />\r\n                                                </Form.Group>\r\n                                                <Form.Group controlId=\"formBasicEmail\">\r\n                                                    <Form.Label>Phone </Form.Label>\r\n                                                    <Form.Control type=\"text\" placeholder=\"phone\" onChange={handleChange(\"phone\")} value={phone} />\r\n                                                </Form.Group>\r\n\r\n                                                <Form.Group controlId=\"formBasicPassword\">\r\n                                                    <Form.Label>Password</Form.Label>\r\n                                                    <Form.Control type=\"password\" placeholder=\"Password\" onChange={handleChange(\"password\")} value={password} />\r\n                                                </Form.Group>\r\n\r\n                                                {\r\n                                                    loadingBtn ? \"loading ...\" : <Button variant=\"primary\" onClick={submit}  >Update Admin Data ..</Button>\r\n                                                }\r\n                                            </Form>\r\n                                        </Col>\r\n                                        <Col md={6}>\r\n                                            <Form.Group controlId=\"exampleForm.ControlInput1\">\r\n                                                <Form.Label>Last name</Form.Label>\r\n                                                <Form.Control type=\"text\" placeholder=\"Last name\" onChange={handleChange(\"lastName\")} value={lastName} />\r\n                                            </Form.Group>\r\n                                            <Form.Group controlId=\"exampleForm.ControlInput1\">\r\n                                                <Form.Label>email </Form.Label>\r\n                                                <Form.Control type=\"email\" placeholder=\"email\" onChange={handleChange(\"email\")} value={email}/>\r\n                                            </Form.Group>\r\n                                            <Form.Group controlId=\"exampleForm.ControlSelect1\">\r\n                                                <Form.Label>Admin Role </Form.Label>\r\n                                                <Form.Control as=\"select\" onChange={handleChange(\"level\")} value={level}>\r\n                                                    <option>Select Role</option>\r\n                                                    <option value=\"1\">Admin</option>\r\n                                                    <option value=\"2\">Moderator</option>\r\n                                                </Form.Control>\r\n                                            </Form.Group>\r\n                                            <Form.Group controlId=\"formBasicPassword\">\r\n                                                <Form.Label>Password Confirmation</Form.Label>\r\n                                                <Form.Control type=\"password\" placeholder=\"Password Confirmation\" onChange={handleChange(\"password2\")} value={password2} />\r\n                                            </Form.Group>\r\n                                        </Col>\r\n                                </Row>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            }\r\n        </Aux>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}