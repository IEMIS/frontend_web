{"ast":null,"code":"import _defineProperty from \"C:/Users/VP/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:/Users/VP/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/VP/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"C:/Users/VP/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"C:/Users/VP/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\VP\\\\web\\\\src\\\\screen\\\\admin\\\\students\\\\Read.js\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Row, Col, Card, Button } from 'react-bootstrap';\nimport Aux from \"../../../hoc/_Aux\";\nimport Swal from 'sweetalert2';\nimport { reads } from './api';\nimport { Link } from 'react-router-dom';\nimport moment from 'moment';\nimport styled from \"styled-components\";\nimport Datatable from 'react-bs-datatable';\nimport { isAuthenticated } from '../../Auth/admin/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Read() {\n  _s();\n\n  var _this = this;\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      datas = _React$useState2[0],\n      setDatas = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      loading = _React$useState4[0],\n      setLoading = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      error = _React$useState6[0],\n      setError = _React$useState6[1];\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      reload = _React$useState8[0],\n      setReload = _React$useState8[1];\n\n  var isLoading = function isLoading() {\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(Aux, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n                children: /*#__PURE__*/_jsxDEV(Card.Title, {\n                  as: \"h3\",\n                  children: \"Wait loading data ...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 27,\n                  columnNumber: 33\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 26,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Students List is loading \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 32,\n                      columnNumber: 37\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 31,\n                    columnNumber: 37\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 30,\n                  columnNumber: 33\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 29,\n                columnNumber: 29\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 25,\n              columnNumber: 25\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 17\n      }, _this);\n    }\n  };\n\n  var isError = function isError() {\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(Aux, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n                children: /*#__PURE__*/_jsxDEV(Card.Title, {\n                  as: \"h3\",\n                  children: \"Error in Loading Data.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 51,\n                  columnNumber: 33\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 50,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: [\"Students data failed to Load, you can refresh \", /*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"primary\",\n                        onClick: handleReload,\n                        children: \"Reload\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 56,\n                        columnNumber: 91\n                      }, _this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 56,\n                      columnNumber: 41\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 55,\n                    columnNumber: 37\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 54,\n                  columnNumber: 33\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 29\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 25\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, _this);\n    }\n  };\n\n  var handleReload = function handleReload(event) {\n    event.preventDefault();\n    setError(false);\n    setLoading(true);\n    setReload(!reload);\n  };\n\n  var BtnEdit = styled(Link)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        padding: 10px 20px;\\n        cursor: pointer;\\n        border-radius: 3px;\\n        background-color: #f0ad4e;\\n        color: #fff;\\n    \"])));\n  var BtnDetail = styled(Link)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n        padding: 10px 20px;\\n        cursor: pointer;\\n        border-radius: 3px;\\n        background-color: #3F4D67;\\n        color: #fff;\\n    \"])));\n  var BtnDelete = styled(Link)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n        padding: 10px 20px;\\n        cursor: pointer;\\n        border-radius: 3px;\\n        background-color: #d43f3a;\\n        color: #fff;\\n    \"])));\n\n  var boot = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var Auth, data, Toast;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return isAuthenticated();\n\n            case 3:\n              Auth = _context.sent;\n              _context.next = 6;\n              return reads(Auth.token);\n\n            case 6:\n              data = _context.sent;\n\n              if (data) {\n                _context.next = 12;\n                break;\n              }\n\n              Swal.fire('Oops...', 'internet server error, Please, check your network connection', 'error');\n              setLoading(false);\n              setError(true);\n              return _context.abrupt(\"return\");\n\n            case 12:\n              if (!data.error) {\n                _context.next = 17;\n                break;\n              }\n\n              Swal.fire('Oops...', data.error, 'error');\n              setLoading(false);\n              setError(true);\n              return _context.abrupt(\"return\");\n\n            case 17:\n              if (!data.message) {\n                _context.next = 24;\n                break;\n              }\n\n              setLoading(false);\n              setError(false);\n              setDatas(data.data);\n              Swal.fire('Successful....', data.message, 'success');\n              Toast = Swal.mixin({\n                toast: true,\n                timerProgressBar: true,\n                position: 'top-end',\n                showConfirmButton: false,\n                timer: 3000\n              });\n              return _context.abrupt(\"return\", Toast.fire({\n                showClass: true,\n                type: 'success',\n                title: data.message\n              }));\n\n            case 24:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function boot() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  React.useEffect(function () {\n    boot();\n  }, [reload]);\n\n  var ViewData = function ViewData() {\n    return /*#__PURE__*/_jsxDEV(Aux, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Manage Students data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }, _this), datas.length > 0 ? /*#__PURE__*/_jsxDEV(Datatable, {\n        tableHeaders: header,\n        tableBody: body(datas),\n        rowsPerPage: 20,\n        rowsPerPageOption: [20, 50, 100, 200]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }, _this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"No Data \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }, _this);\n  };\n\n  var header = [{\n    title: 'SN',\n    prop: 'id',\n    filterable: true,\n    sortable: true\n  }, {\n    title: 'Full Names',\n    prop: 'names',\n    filterable: true,\n    sortable: true\n  }, {\n    title: 'Gender',\n    prop: 'gender',\n    filterable: true,\n    sortable: true\n  }, {\n    title: 'Age',\n    prop: 'age',\n    filterable: true,\n    sortable: true\n  }, {\n    title: 'Edu Level',\n    prop: 'eduLevel',\n    filterable: true,\n    sortable: true\n  }, {\n    title: 'School',\n    prop: 'school',\n    filterable: true,\n    sortable: true\n  }, {\n    title: 'Status',\n    prop: 'status',\n    filterable: true,\n    sortable: true\n  }, {\n    title: 'Created',\n    prop: 'date',\n    filterable: true,\n    sortable: true\n  }, {\n    title: 'Last Update',\n    prop: 'date',\n    filterable: true,\n    sortable: true\n  }, {\n    title: 'Class',\n    prop: 'class',\n    filterable: true,\n    sortable: true\n  }, {\n    title: 'Details',\n    prop: 'edit',\n    cell: function cell(row) {\n      return /*#__PURE__*/_jsxDEV(BtnEdit, {\n        to: \"/admin/students/edit/\".concat(row.edit),\n        children: \" Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 55\n      }, _this);\n    }\n  }, {\n    title: 'Details',\n    prop: 'delete',\n    cell: function cell(row) {\n      return /*#__PURE__*/_jsxDEV(BtnDelete, {\n        to: \"/admin/students/delete/\".concat(row.delete),\n        children: \" Delete \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 57\n      }, _this);\n    }\n  }, {\n    title: 'Details',\n    prop: 'detail',\n    cell: function cell(row) {\n      return /*#__PURE__*/_jsxDEV(BtnDetail, {\n        to: \"/admin/students/read/\".concat(row.detail),\n        children: \" Detail \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 57\n      }, _this);\n    }\n  }];\n\n  var body = function body(dat) {\n    return dat.map(function (data, index) {\n      var _ref2;\n\n      //console.log(JSON.stringify({data}))\n      return _ref2 = {\n        id: index + 1,\n        names: \"\".concat(data.firstName, \" \").concat(data.lastName),\n        gender: data.gender,\n        age: data.age,\n        eduLevel: data.edulevel,\n        school: data.fromSchool[0].code,\n        status: data.status,\n        date: moment(data.createdAt, \"YYYY-MM-DDTHH:mm:ss.SSSSZ\").format('L')\n      }, _defineProperty(_ref2, \"date\", moment(data.updatedAt, \"YYYY-MM-DDTHH:mm:ss.SSSSZ\").format('L')), _defineProperty(_ref2, \"class\", data.fromClass[0].classCode), _defineProperty(_ref2, \"edit\", data._id), _defineProperty(_ref2, \"delete\", data._id), _defineProperty(_ref2, \"detail\", data._id), _ref2;\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Aux, {\n    children: error ? isError() : loading ? isLoading() : ViewData()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Read, \"uAM0VyZwuMAsheaM45OD0FkE4FM=\");\n\n_c = Read;\n\nvar _c;\n\n$RefreshReg$(_c, \"Read\");","map":{"version":3,"sources":["C:/Users/VP/web/src/screen/admin/students/Read.js"],"names":["React","Row","Col","Card","Button","Aux","Swal","reads","Link","moment","styled","Datatable","isAuthenticated","Read","useState","datas","setDatas","loading","setLoading","error","setError","reload","setReload","isLoading","isError","handleReload","event","preventDefault","BtnEdit","BtnDetail","BtnDelete","boot","Auth","token","data","fire","message","Toast","mixin","toast","timerProgressBar","position","showConfirmButton","timer","showClass","type","title","useEffect","ViewData","length","header","body","prop","filterable","sortable","cell","row","edit","delete","detail","dat","map","index","id","names","firstName","lastName","gender","age","eduLevel","edulevel","school","fromSchool","code","status","date","createdAt","format","updatedAt","fromClass","classCode","_id"],"mappings":"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","sourcesContent":["\r\nimport React from 'react';\r\nimport {Row, Col, Card, Button,} from 'react-bootstrap';\r\nimport Aux from \"../../../hoc/_Aux\";\r\nimport Swal from 'sweetalert2'\r\nimport { reads} from './api';\r\nimport { Link } from 'react-router-dom';\r\nimport moment from 'moment'; \r\nimport styled from \"styled-components\";\r\nimport Datatable from 'react-bs-datatable'; \r\nimport { isAuthenticated } from '../../Auth/admin/api';\r\n\r\n\r\nexport default function Read() {\r\n    const [datas, setDatas] = React.useState([]);\r\n    const [loading, setLoading] = React.useState(false)\r\n    const [error, setError] = React.useState(false)\r\n    const [reload, setReload] = React.useState(false)\r\n    const isLoading = () => {\r\n        if (loading){\r\n            return (\r\n                <Aux>\r\n                    <Row>\r\n                        <Col>\r\n                        <Card>\r\n                            <Card.Header>\r\n                                <Card.Title as=\"h3\">Wait loading data ...</Card.Title>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <Row>\r\n                                    <Col>\r\n                                    <h1>Students List is loading </h1>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Card.Body>\r\n                        </Card>\r\n                        </Col>\r\n                    </Row>\r\n                </Aux>\r\n            )\r\n        }\r\n    };\r\n    const isError = () => {\r\n        if(error){\r\n            return (\r\n                <Aux>\r\n                    <Row>\r\n                        <Col>\r\n                        <Card>\r\n                            <Card.Header>\r\n                                <Card.Title as=\"h3\">Error in Loading Data.</Card.Title>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <Row>\r\n                                    <Col>\r\n                                        <h1>Students data failed to Load, you can refresh <Button variant=\"primary\" onClick={handleReload}>Reload</Button> </h1>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Card.Body>\r\n                        </Card>\r\n                        </Col>\r\n                    </Row>\r\n                </Aux>\r\n            )\r\n        }\r\n    };\r\n\r\n    const handleReload = event =>{\r\n        event.preventDefault();\r\n        setError(false)\r\n        setLoading(true)\r\n        setReload(!reload) \r\n    }\r\n\r\n    const BtnEdit = styled(Link)`\r\n        padding: 10px 20px;\r\n        cursor: pointer;\r\n        border-radius: 3px;\r\n        background-color: #f0ad4e;\r\n        color: #fff;\r\n    `;\r\n    const BtnDetail = styled(Link)`\r\n        padding: 10px 20px;\r\n        cursor: pointer;\r\n        border-radius: 3px;\r\n        background-color: #3F4D67;\r\n        color: #fff;\r\n    `;\r\n\r\n    const BtnDelete = styled(Link)`\r\n        padding: 10px 20px;\r\n        cursor: pointer;\r\n        border-radius: 3px;\r\n        background-color: #d43f3a;\r\n        color: #fff;\r\n    `;\r\n\r\n    const boot = async () => {\r\n        setLoading(true)\r\n        const Auth = await isAuthenticated()\r\n        const data = await reads(Auth.token);\r\n        if(!data){\r\n            Swal.fire('Oops...', 'internet server error, Please, check your network connection', 'error')\r\n            setLoading(false)\r\n            setError(true)\r\n            return \r\n        }\r\n        if(data.error){\r\n            Swal.fire('Oops...', data.error, 'error')\r\n            setLoading(false)\r\n            setError(true)\r\n            return\r\n        }\r\n        if(data.message){\r\n            setLoading(false)\r\n            setError(false)\r\n            setDatas(data.data)\r\n            Swal.fire('Successful....', data.message, 'success');\r\n            let Toast = Swal.mixin({\r\n                toast: true,\r\n                timerProgressBar: true,\r\n                position: 'top-end',\r\n                showConfirmButton: false,\r\n                timer: 3000\r\n            });\r\n    \r\n            return Toast.fire({\r\n                showClass: true,\r\n                type: 'success',\r\n                title: data.message\r\n            })\r\n        }\r\n    }\r\n    React.useEffect(() => {\r\n        boot()\r\n    },[reload])\r\n\r\n    const ViewData = () =>{\r\n        return(\r\n          <Aux>\r\n            <h1>Manage Students data</h1>\r\n            <hr />\r\n            {\r\n              datas.length > 0 ?  \r\n              <Datatable \r\n                tableHeaders={header} \r\n                tableBody={body(datas)} \r\n                rowsPerPage={20}\r\n                rowsPerPageOption={[20, 50, 100, 200]}\r\n              />\r\n              : <h1>No Data </h1>\r\n            }\r\n          </Aux>\r\n        )\r\n      }\r\n\r\n      const header = [\r\n        { title: 'SN', prop: 'id', filterable: true, sortable: true, },\r\n        { title: 'Full Names', prop: 'names', filterable: true, sortable: true, },\r\n        { title: 'Gender', prop: 'gender', filterable: true, sortable: true, },\r\n        { title: 'Age', prop: 'age', filterable: true, sortable: true, },\r\n        { title: 'Edu Level', prop: 'eduLevel', filterable: true, sortable: true },\r\n        { title: 'School', prop: 'school', filterable: true, sortable: true, },\r\n        { title: 'Status', prop: 'status', filterable: true, sortable: true },\r\n        { title: 'Created', prop: 'date', filterable: true, sortable: true },\r\n        { title: 'Last Update', prop: 'date', filterable: true, sortable: true },\r\n        { title: 'Class', prop: 'class', filterable: true, sortable: true },\r\n        { title: 'Details', prop: 'edit', cell: row =><BtnEdit to={`/admin/students/edit/${row.edit}`} > Edit</BtnEdit>},\r\n        { title: 'Details', prop: 'delete', cell: row =><BtnDelete to={`/admin/students/delete/${row.delete}`} > Delete </BtnDelete>},\r\n        { title: 'Details', prop: 'detail', cell: row =><BtnDetail to={`/admin/students/read/${row.detail}`} > Detail </BtnDetail>},\r\n      ];\r\n    \r\n      const body = (dat) => {\r\n        return dat.map((data, index)=>{\r\n            //console.log(JSON.stringify({data}))\r\n          return{\r\n            id:index +1,\r\n            names:`${data.firstName} ${data.lastName}`,\r\n            gender:data.gender,\r\n            age:data.age,\r\n            eduLevel:data.edulevel,\r\n            school:data.fromSchool[0].code,\r\n            status:data.status,\r\n            date:moment(data.createdAt,\"YYYY-MM-DDTHH:mm:ss.SSSSZ\").format('L'),\r\n            date:moment(data.updatedAt,\"YYYY-MM-DDTHH:mm:ss.SSSSZ\").format('L'),\r\n            class:data.fromClass[0].classCode,\r\n            edit:data._id,\r\n            delete:data._id,\r\n            detail:data._id,\r\n          }\r\n        })\r\n      };\r\n\r\n\r\n    return (\r\n        <Aux>\r\n            {error ? isError() : loading ?  isLoading() :ViewData()}\r\n        </Aux>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}